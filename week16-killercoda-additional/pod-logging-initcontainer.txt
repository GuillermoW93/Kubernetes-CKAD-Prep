apiVersion: v1
kind: Pod
metadata:
  name: pod-init-example
spec:
  initContainers:
  - name: init-setup
    image: busybox
    args: ['sh', '-c', 'echo "Initializing log directory" > /var/log/main-container.log']
    volumeMounts:
      - name: varlog
        mountPath: /var/log
  containers:
  - name: main
    image: busybox
    args: ['sh', '-c', 'while true; do echo "$(date)\n" >> /var/log/main-container.log; sleep 5; done']
    volumeMounts:
      - name: varlog
        mountPath: /var/log
  volumes:
    - name: varlog
      emptyDir: {}
